name: 'Lint/Build/Test'
description: 'lint, format, typecheck, build, and test'

inputs:
  skip-steps:
    description: "Format is comma-seperated steps to skip. Example: 'build,typecheck'"
    required: false
    default: ''

runs:
  using: composite
  env:
    NEXT_PUBLIC_WALLET_CONNECT_PROJECT_ID: ${{ secrets.WALLET_CONNECT_PROJECT_ID }}
  steps:
    - name: 'ðŸ§¹ Lint'
      shell: bash
      if: ${{ !contains(inputs.skip-steps, 'lint') }}
      run: bun run lint

    - name: 'ðŸ§¹ Format'
      shell: bash
      if: ${{ !contains(inputs.skip-steps, 'format') }}
      run: bun run format

    - name: 'ðŸ§ª Typecheck'
      shell: bash
      if: ${{ !contains(inputs.skip-steps, 'typecheck') }}
      run: bun run typecheck

    - name: 'ðŸ”§ Build'
      shell: bash
      if: ${{ !contains(inputs.skip-steps, 'build') }}
      run: bun run build

    - name: 'ðŸ§ª Test'
      shell: bash
      if: ${{ !contains(inputs.skip-steps, 'test') }}
      run: bun test
